<html>
<head>
  <link rel="stylesheet" href="assets/css/uikit.min.css" />
  <script src="dist/native-extensions-webcomponents.js"></script>
</head>
<body>
  <!-- search form -->
  <form id="search-form" class="uk-form-horizontal">
    <div class="uk-margin">
        <input name="query" class="uk-input" type="text">
        <button class="uk-button uk-button-primary">Search</button>
    </div>
  </form>

  <!-- results table -->
  <table id="search-table" class="uk-table uk-table-striped" is="lis-repeat-template-table" data='[{"name": "G.max.123"}, {"name": "P.vulgaris.321"}]'>
    <caption>This is the table's caption</caption>
    <thead>
      <tr><th>Gene Name</th></tr>
    </thead>
    <tbody>
      <template>
        <tr><td>{~ name ~}</td></tr>
      </template>
    </tbody>
  <table>

  <!-- how the elements interact -->
  <script>
    // get the view elements
    const form = document.getElementById("search-form");
    const table = document.getElementById("search-table");

    // what to do when the form is submitted
    function submit(e) {
      e.preventDefault();
      // get the user inputs
      const data = new FormData(e.target);
      const query = data.get('query');
      // get genes from a service
      const url = `http://localhost/gcv/gene-search?q=${query}`
      const init = {
          method: "GET",
          mode: "cors",
        };
      fetch(url, init)
        .then(response => response.json())
        .then(genes => table.data = genes.map((name) => ({name})));
    }
    form.onsubmit = submit;
  </script>
</body>
</html>
