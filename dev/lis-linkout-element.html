<!DOCTYPE html>

<html>

  <head>
    <meta charset="utf-8" />
    <title>LIS Web-Components - &lt;lis-linkout-element&gt;</title>
    <!-- CSS framework -->
    <link rel="stylesheet" type="text/css" href="../node_modules/uikit/dist/css/uikit.min.css">
    <script src="../node_modules/uikit/dist/js/uikit.min.js"></script>
    <!-- web components polyfills -->
    <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="../node_modules/lit/polyfill-support.js"></script>
    <!-- GraphQL -->
    <script type="text/javascript" src="./linkout.js"></script>
    <!-- web components -->
    <script type="module" src="../dist/index.js"></script>
  </head>

  <body>

    <div class="uk-container">
      <h1>&lt;lis-linkout-element&gt;</h1>
      <p>
        The <code>&lt;lis-linkout-element&gt;</code> provides a web component for loading and displaying hyperlinks.
        In this example, links are loaded for genes using the LIS linkout microservice.
        A new query can be issued using the <code>linkoutElement.getLinkouts(...)</code> method in the web console.
      </p>
      <hr>

      <!-- the custom linkout element -->
       <a class="uk-button uk-button-default" href="#test-linkout" type="submit" uk-toggle>Open</a>
       <lis-modal-element modalId="test-linkout">
         <lis-linkout-element id="linkouts"></lis-linkout-element>
       </lis-modal-element>


    </div>

    <!-- set the linkout function by property because functions can't be set as attributes -->
    <script type="text/javascript">
      
      function linkoutFunction(genes, {abortSignal}){
        return geneLinkouts(linkoutUri, genes, abortSignal)
          .then((results) => ({results}));
      }

      const linkoutElement = document.getElementById('linkouts');
      linkoutElement.linkoutFunction = linkoutFunction;

      window.onload = (event) => {
        linkoutElement.getLinkouts(['cicar.CDCFrontier.gnm3.ann1.Ca1g000600']);
      }

    </script>

  </body>

</html>
